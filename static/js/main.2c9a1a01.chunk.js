(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{14:function(e,t,c){},16:function(e,t,c){},17:function(e,t,c){},18:function(e,t,c){},19:function(e,t,c){"use strict";c.r(t);var i=c(7),a=c.n(i),n=(c(13),c(8)),s=c(2),r=c(1),o=(c(14),c(3)),l=c.n(o),d=c(0),j=function(e){var t=e.url,c=e.alt,i=e.dataCy,a=e.className;return Object(d.jsx)("figure",{className:l()("image",a),children:Object(d.jsx)("img",{src:t,alt:c,"data-cy":i})})},m=function(e){var t=e.imdbUrl,c=e.description;return Object(d.jsxs)("div",{className:"content","data-cy":"movieDescription",children:[c,Object(d.jsx)("br",{}),Object(d.jsx)("a",{href:t,"data-cy":"movieURL",children:"IMDB"})]})},b=(c(16),Object(r.memo)((function(e){var t=e.movie;return Object(d.jsxs)("div",{className:"card","data-cy":"movieCard",children:[Object(d.jsx)("div",{className:"card-image",children:Object(d.jsx)(j,{alt:"Film logo",url:t.imgUrl,className:"is-4by3","data-cy":"moviePoster"})}),Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsxs)("div",{className:"media",children:[Object(d.jsx)("div",{className:"media-left",children:Object(d.jsx)(j,{alt:"imdb",className:"is-48x48",url:"images/imdb-logo.jpeg"})}),Object(d.jsx)("div",{className:"media-content",children:Object(d.jsx)("p",{className:"title is-8","data-cy":"movieTitle",children:t.title})})]}),Object(d.jsx)(m,{imdbUrl:t.imdbUrl,description:t.description})]})]})}))),u=Object(r.memo)((function(e){var t=e.movies;return Object(d.jsx)("div",{className:"movies",children:t.map((function(e){return Object(d.jsx)(b,{movie:e},e.imdbId)}))})})),v=Object(r.memo)((function(e){var t=e.movie;return Object(d.jsxs)("div",{className:"container","data-cy":"previewContainer",children:[Object(d.jsx)("h2",{className:"title",children:"Preview"}),t&&Object(d.jsx)(b,{movie:t})]})})),h="https://www.omdbapi.com/?apikey=".concat("132d4730"),O=Object(r.memo)((function(e){var t=e.type,c=e.dataCy,i=e.content,a=e.loading,n=e.className,s=e.onClick,r=e.disabled,o=void 0!==r&&r;return Object(d.jsx)("button",{type:t,"data-cy":c,disabled:o,className:l()("button",n,{"is-loading":a}),onClick:s,children:i})})),x=function(e){var t=e.id,c=e.type,i=e.value,a=e.label,n=e.dataCy,s=e.hasError,r=e.placeholder,o=e.onChange;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{className:"label",htmlFor:t,children:a}),Object(d.jsx)("div",{className:"control",children:Object(d.jsx)("input",{id:t,type:c,value:i,"data-cy":n,placeholder:r,className:l()("input",{"is-dander":s}),onChange:o})}),s&&Object(d.jsx)("p",{className:"help is-danger","data-cy":"errorMessage",children:"Can't find a movie with such a title"})]})},f=function(e){var t=e.textError;return Object(d.jsx)("div",{className:"notification is-danger is-light",children:"An error occured when loading ".concat(t,"!")})},p=(c(17),Object(r.memo)((function(e){var t=e.movie,c=e.setMovie,i=e.handleAddMovie,a=Object(r.useState)(""),n=Object(s.a)(a,2),o=n[0],l=n[1],j=Object(r.useState)(!1),m=Object(s.a)(j,2),b=m[0],u=m[1],v=Object(r.useState)(!1),p=Object(s.a)(v,2),g=p[0],N=p[1],y=Object(r.useState)(!1),C=Object(s.a)(y,2),w=C[0],M=C[1],k=Object(r.useMemo)((function(){return!(null!==o&&void 0!==o&&o.length)}),[o]),I=Object(r.useCallback)((function(e){g&&N(!1);var t=e.target.value;l(t)}),[g]),E=Object(r.useCallback)((function(e){e.preventDefault(),u(!0),function(e){return fetch("".concat(h,"&t=").concat(e)).then((function(e){var t;if(!e.ok)throw"".concat(e.status," - ").concat(e.statusText);if(null===(t=e.headers.get("content-type"))||void 0===t||!t.includes("application/json"))throw"Content type is not supported";return e.json()}))}(o).then((function(e){var t;"imdbID"in e&&c({title:e.Title,description:e.Plot,imgUrl:(t=e.Poster,"N/A"===t?"https://via.placeholder.com/360x270.png?text=no%20preview":t),imdbId:e.imdbID,imdbUrl:"https://www.imdb.com/title/".concat(e.imdbID)}),"Error"in e&&N(!0)})).catch((function(){return M(!0)})).finally((function(){return u(!1)}))}),[o,g]);return Object(r.useEffect)((function(){t||l("")}),[t]),Object(d.jsxs)("form",{className:"find-movie",onSubmit:E,children:[Object(d.jsx)("div",{className:"field",children:Object(d.jsx)(x,{value:o,id:"movie-title",label:"Movie title",dataCy:"titleField",placeholder:"Enter a title to search",hasError:g,onChange:I})}),Object(d.jsxs)("div",{className:"field is-grouped",children:[Object(d.jsx)("div",{className:"control",children:Object(d.jsx)(O,{type:"submit",loading:b,dataCy:"searchButton",className:"is-light",disabled:k,content:"Find a movie"})}),t&&Object(d.jsx)("div",{className:"control",children:Object(d.jsx)(O,{type:"button",dataCy:"addButton",className:"is-primary",content:"Add to the list",onClick:i})})]}),w&&Object(d.jsx)(f,{textError:"movie"})]})}))),g=function(e){var t=e.movie,c=e.setMovie,i=e.handleAddMovie;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{movie:t,setMovie:c,handleAddMovie:i}),t&&Object(d.jsx)(v,{movie:t})]})},N=(c(18),function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),c=t[0],i=t[1],a=Object(r.useState)(null),o=Object(s.a)(a,2),l=o[0],j=o[1],m=Object(r.useCallback)((function(){var e=c.find((function(e){return e.imdbId===(null===l||void 0===l?void 0:l.imdbId)}));if(l&&!e)return i([].concat(Object(n.a)(c),[l])),void j(null);j(null)}),[l,c]);return Object(d.jsxs)("div",{className:"page",children:[Object(d.jsx)("div",{className:"page-content",children:!!c.length&&Object(d.jsx)(u,{movies:c})}),Object(d.jsx)("div",{className:"sidebar",children:Object(d.jsx)(g,{movie:l,setMovie:j,handleAddMovie:m})})]})});a.a.render(Object(d.jsx)(N,{}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.2c9a1a01.chunk.js.map